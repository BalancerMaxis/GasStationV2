from brownie import GasStationV2, accounts

GITHUB_POKER="0x737760C760FfEc370F84861E4Be4AFF7093Ffa3f"
OMNICHAIN_MULTISIG="0x9ff471f9f98f42e5151c7855fd1b5aa906b1af7e"
def deploy_chain(account, chain):
    keeper = OMNICHAIN_MULTISIG
    GasStationV2.deploy(keeper, 60*60*8, {"from": account})
    gs = GasStationV2[len(GasStationV2)-1]
    GasStationV2.publish_source(gs)
    gs.transferOwnership(OMNICHAIN_MULTISIG)
    ## Add current deployer + Juani to gas station
    gs.addRecipients([account.address, "0x9098b50ee2d9E4c3C69928A691DA3b192b4C9673"], 0.02e18, 0.03e18, {'from': account})
    ## Add github poker to gas station that can be used until other automation is in place
    gs.addRecipients(["0x737760C760FfEc370F84861E4Be4AFF7093Ffa3f"], 0.01e18, 0.02e18, {'from': account})
    ## Setup Safes
    f=Contract("0xa6B71E26C5e0845f74c812102Ca7114b6a896AB2") ## safe factory
    ## LM Multisig
    f.createProxyWithNonce("0x3E5c63644E683549055b9Be8653de26E0B4CD36E", "0xb63e800d0000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000f48f2b2d2a534e402487b3ee7c18c33aec0fe5e40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000cf4ff1e03830d692f52eb094c52a5a6a2181ab3f000000000000000000000000c4591c41e01a7a654b5427f39bbd1dee5bd45d1d0000000000000000000000007c2ea10d3e5922ba3bbbafa39dc0677353d2af170000000000000000000000008053484489b110181a6dba0b59dda887e433f4700000000000000000000000007019be4e4eb74ca5f61224feaf687d2b43998516000000000000000000000000affc70b81d54f229a5f50ec07e2c76d2aaad07ae00000000000000000000000011761c7b08287d9489cd84c04df6852f5c07107b0000000000000000000000000000000000000000000000000000000000000000", "1702571090985", {'from': account})
    ## DAO Multisig
    f.createProxyWithNonce("0x3E5c63644E683549055b9Be8653de26E0B4CD36E", "0xb63e800d0000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000220000000000000000000000000f48f2b2d2a534e402487b3ee7c18c33aec0fe5e40000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008000000000000000000000000cf4ff1e03830d692f52eb094c52a5a6a2181ab3f00000000000000000000000011761c7b08287d9489cd84c04df6852f5c07107b000000000000000000000000200550cad164e8e0cb544a9c7dc5c833122c14380000000000000000000000007019be4e4eb74ca5f61224feaf687d2b43998516000000000000000000000000c4591c41e01a7a654b5427f39bbd1dee5bd45d1d000000000000000000000000affc70b81d54f229a5f50ec07e2c76d2aaad07ae0000000000000000000000007c2ea10d3e5922ba3bbbafa39dc0677353d2af17000000000000000000000000512fce9b07ce64590849115ee6b32fd40ec0f5f30000000000000000000000000000000000000000000000000000000000000000", "0", {f'from':account})
    ## EmergencyDAO Multlsig
    f.createProxyWithNonce("0x3E5c63644E683549055b9Be8653de26E0B4CD36E", "0xb63e800d0000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000017062a1de2fe6b99be3d9d37841fed19f5738040000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000f01cc7154e255d20489e091a5aea10bc136696a8000000000000000000000000512fce9b07ce64590849115ee6b32fd40ec0f5f3000000000000000000000000affc70b81d54f229a5f50ec07e2c76d2aaad07ae0000000000000000000000007c2ea10d3e5922ba3bbbafa39dc0677353d2af170000000000000000000000006bb4720473d4d7133f944785e5ee1a650c07f34e000000000000000000000000bbf0ae5195444264364ca7eb7e3bb1971b4c3ecb000000000000000000000000b5485e0f543ee6e01e221a57e58ed95268215ac90000000000000000000000000000000000000000000000000000000000000000", "0", {f'from':account})


    ## Fund poker
    account.transfer(GITHUB_POKER, int(0.001e18))
    ## Fund gas station
    account.transfer(gs.address, int(0.9*account.balance()))

